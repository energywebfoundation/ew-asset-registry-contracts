{"abi":[{"constant":false,"inputs":[{"name":"_assetId","type":"uint256"},{"name":"_newSmartMeter","type":"address"}],"name":"updateSmartMeter","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_newLogic","type":"address"}],"name":"update","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"userContractLookup","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"db","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"owner","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_assetId","type":"uint256"},{"name":"_newMeterRead","type":"uint256"},{"name":"_lastSmartMeterReadFileHash","type":"string"},{"name":"_smartMeterDown","type":"bool"}],"name":"saveSmartMeterRead","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_newOwner","type":"address"}],"name":"changeOwner","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_assetId","type":"uint256"},{"name":"_consumed","type":"uint256"}],"name":"setConsumptionForPeriode","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"getAssetListLength","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_role","type":"uint8"},{"name":"_caller","type":"address"}],"name":"isRole","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_smartMeter","type":"address"},{"name":"_owner","type":"address"},{"name":"_active","type":"bool"},{"name":"_matcher","type":"address"},{"name":"_propertiesDocumentHash","type":"string"},{"name":"_url","type":"string"}],"name":"createAsset","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_assetId","type":"uint256"},{"name":"_active","type":"bool"}],"name":"setActive","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_assetId","type":"uint256"}],"name":"getAsset","outputs":[{"name":"_smartMeter","type":"address"},{"name":"_owner","type":"address"},{"name":"_lastSmartMeterReadWh","type":"uint256"},{"name":"_certificatesUsedForWh","type":"uint256"},{"name":"_active","type":"bool"},{"name":"_lastSmartMeterReadFileHash","type":"string"},{"name":"_propertiesDocumentHash","type":"string"},{"name":"_url","type":"string"},{"name":"_matcher","type":"address[]"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_dbAddress","type":"address"},{"name":"_admin","type":"address"}],"name":"init","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"inputs":[{"name":"_userContractLookup","type":"address"},{"name":"_assetContractLookup","type":"address"}],"payable":false,"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_assetId","type":"uint256"},{"indexed":false,"name":"_oldMeterRead","type":"uint256"},{"indexed":false,"name":"_newMeterRead","type":"uint256"},{"indexed":false,"name":"_certificatesUsedForWh","type":"uint256"},{"indexed":false,"name":"_smartMeterDown","type":"bool"}],"name":"LogNewMeterRead","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"_sender","type":"address"},{"indexed":true,"name":"_assetId","type":"uint256"}],"name":"LogAssetCreated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_assetId","type":"uint256"}],"name":"LogAssetFullyInitialized","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_assetId","type":"uint256"}],"name":"LogAssetSetActive","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_assetId","type":"uint256"}],"name":"LogAssetSetInactive","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"_newOwner","type":"address"}],"name":"LogChangeOwner","type":"event"}],"bytecode":"60806040523480156200001157600080fd5b506040516040806200244283398101806040526200003391908101906200012f565b818180806000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055505081600160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550505081600360006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055505050620001b8565b600062000111825162000190565b905092915050565b6000620001278251620001a4565b905092915050565b600080604083850312156200014357600080fd5b6000620001538582860162000119565b9250506020620001668582860162000103565b9150509250929050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b60006200019d8262000170565b9050919050565b6000620001b18262000170565b9050919050565b61227a80620001c86000396000f3006080604052600436106100d0576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff16806307052442146100d55780631c1b8772146100fe57806344724c8c146101275780634d655aff146101525780638da5cb5b1461017d578063a4d068ba146101a8578063a6f9dae1146101d1578063a861c6ef146101fa578063ae51439c14610223578063bb5a389e1461024e578063e28cb1921461028b578063e60a955d146102b4578063eac8f5b8146102dd578063f09a401614610322575b600080fd5b3480156100e157600080fd5b506100fc60048036036100f791908101906119c5565b61034b565b005b34801561010a57600080fd5b50610125600480360361012091908101906117a5565b610490565b005b34801561013357600080fd5b5061013c6105cd565b6040516101499190611ecb565b60405180910390f35b34801561015e57600080fd5b506101676105f3565b6040516101749190611eb0565b60405180910390f35b34801561018957600080fd5b50610192610619565b60405161019f9190611d5e565b60405180910390f35b3480156101b457600080fd5b506101cf60048036036101ca9190810190611a79565b61063e565b005b3480156101dd57600080fd5b506101f860048036036101f391908101906117a5565b6109be565b005b34801561020657600080fd5b50610221600480360361021c9190810190611a3d565b610b3b565b005b34801561022f57600080fd5b50610238610bea565b6040516102459190611f86565b60405180910390f35b34801561025a57600080fd5b50610275600480360361027091908101906118f6565b610caf565b6040516102829190611e95565b60405180910390f35b34801561029757600080fd5b506102b260048036036102ad9190810190611833565b610e3c565b005b3480156102c057600080fd5b506102db60048036036102d69190810190611a01565b61103f565b005b3480156102e957600080fd5b5061030460048036036102ff9190810190611973565b6111ea565b60405161031999989796959493929190611dec565b60405180910390f35b34801561032e57600080fd5b50610349600480360361034491908101906117f7565b61131e565b005b6000600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff161415151561039357600080fd5b600161039f8133610caf565b15156103e0576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016103d790611f06565b60405180910390fd5b600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16630ff85b9484846040518363ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401610459929190611fa1565b600060405180830381600087803b15801561047357600080fd5b505af1158015610487573d6000803e3d6000fd5b50505050505050565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16141515610521576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161051890611f26565b60405180910390fd5b600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663a6f9dae1826040518263ffffffff167c01000000000000000000000000000000000000000000000000000000000281526004016105989190611d5e565b600060405180830381600087803b1580156105b257600080fd5b505af11580156105c6573d6000803e3d6000fd5b5050505050565b600360009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b61064661143b565b6000600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff161415151561068e57600080fd5b600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663eac8f5b8876040518263ffffffff167c01000000000000000000000000000000000000000000000000000000000281526004016107059190611f86565b600060405180830381600087803b15801561071f57600080fd5b505af1158015610733573d6000803e3d6000fd5b505050506040513d6000823e3d601f19601f8201168201806040525061075c9190810190611932565b90503373ffffffffffffffffffffffffffffffffffffffff16816020015173ffffffffffffffffffffffffffffffffffffffff161415156107d2576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016107c990611f46565b60405180910390fd5b80608001511515610818576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161080f90611f66565b60405180910390fd5b857f7517279c41ec47d7f502ff774d831a4b597622367e34b0fb4779d90cbdff26bd826060015187846000015186604051610856949392919061204e565b60405180910390a2600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16637c7959dc8786866040518463ffffffff167c01000000000000000000000000000000000000000000000000000000000281526004016108d993929190611ff3565b600060405180830381600087803b1580156108f357600080fd5b505af1158015610907573d6000803e3d6000fd5b50505050600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166357c3bc6087876040518363ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401610984929190612025565b600060405180830381600087803b15801561099e57600080fd5b505af11580156109b2573d6000803e3d6000fd5b50505050505050505050565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16141515610a4f576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610a4690611f26565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff1614151515610ac1576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610ab890611ee6565b60405180910390fd5b806000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055507f95fd54179c11867fb083dd94347ea50f144dd4cfd7612b7bca169f162824af1681604051610b309190611d5e565b60405180910390a150565b600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663c279130683836040518363ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401610bb4929190612025565b600060405180830381600087803b158015610bce57600080fd5b505af1158015610be2573d6000803e3d6000fd5b505050505050565b6000600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663ae51439c6040518163ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401602060405180830381600087803b158015610c7257600080fd5b505af1158015610c86573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250610caa919081019061199c565b905090565b6000806000600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16635c7460d66040518163ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401602060405180830381600087803b158015610d3a57600080fd5b505af1158015610d4e573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250610d7291908101906117ce565b73ffffffffffffffffffffffffffffffffffffffff1663265209f2856040518263ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401610dc69190611d5e565b602060405180830381600087803b158015610de057600080fd5b505af1158015610df4573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250610e18919081019061199c565b9150846005811115610e2657fe5b60020a9050600081831614159250505092915050565b600080600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1614151515610e8557600080fd5b600388610e928282610caf565b1515610ed3576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610eca90611f06565b60405180910390fd5b6001610edf8133610caf565b1515610f20576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610f1790611f06565b60405180910390fd5b600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663e28cb1928d8d8d8d8d8d8d8d6040518963ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401610fa5989796959493929190611d79565b602060405180830381600087803b158015610fbf57600080fd5b505af1158015610fd3573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250610ff7919081019061199c565b9350837fd3ab0c36887772472a25b1c1cecc0dee794b7c5ca472edaa2db255346878ee6b336040516110299190611d5e565b60405180910390a2505050505050505050505050565b6000600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff161415151561108757600080fd5b60016110938133610caf565b15156110d4576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016110cb90611f06565b60405180910390fd5b600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663e60a955d84846040518363ffffffff167c010000000000000000000000000000000000000000000000000000000002815260040161114d929190611fca565b600060405180830381600087803b15801561116757600080fd5b505af115801561117b573d6000803e3d6000fd5b5050505081156111b757827fbb4a2f3fc0f65f1ee98dc140226f7718191ba94892efdc55613785ccbf00a8e860405160405180910390a26111e5565b827f61f3fbe0c2049de9b0219669983a937b4377c1dced582b6a720a87b49ae3c08b60405160405180910390a25b505050565b600080600080600060608060608061120061143b565b600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663eac8f5b88c6040518263ffffffff167c01000000000000000000000000000000000000000000000000000000000281526004016112779190611f86565b600060405180830381600087803b15801561129157600080fd5b505af11580156112a5573d6000803e3d6000fd5b505050506040513d6000823e3d601f19601f820116820180604052506112ce9190810190611932565b9050806020015199508060400151985080606001519750806080015195508060a001519450806000015196508060e00151935080610100015192508060c001519150509193959799909294969850565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161415156113af576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016113a690611f26565b60405180910390fd5b6000600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff161415156113f657600080fd5b81600260006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055505050565b6101206040519081016040528060008152602001600073ffffffffffffffffffffffffffffffffffffffff168152602001600073ffffffffffffffffffffffffffffffffffffffff16815260200160008152602001600015158152602001606081526020016060815260200160608152602001606081525090565b60006114c2823561217a565b905092915050565b60006114d6825161217a565b905092915050565b600082601f83011215156114f157600080fd5b81516115046114ff826120c0565b612093565b9150818183526020840193506020810190508385602084028201111561152957600080fd5b60005b83811015611559578161153f88826114ca565b84526020840193506020830192505060018101905061152c565b5050505092915050565b600061156f823561219a565b905092915050565b6000611583825161219a565b905092915050565b600061159782356121a6565b905092915050565b60008083601f84011215156115b357600080fd5b8235905067ffffffffffffffff8111156115cc57600080fd5b6020830191508360018202830111156115e457600080fd5b9250929050565b600082601f83011215156115fe57600080fd5b815161161161160c826120e8565b612093565b9150808252602083016020830185838301111561162d57600080fd5b6116388382846121fc565b50505092915050565b6000610120828403121561165457600080fd5b61165f610120612093565b9050600061166f84828501611791565b6000830152506020611683848285016114ca565b6020830152506040611697848285016114ca565b60408301525060606116ab84828501611791565b60608301525060806116bf84828501611577565b60808301525060a082015167ffffffffffffffff8111156116df57600080fd5b6116eb848285016115eb565b60a08301525060c082015167ffffffffffffffff81111561170b57600080fd5b611717848285016114de565b60c08301525060e082015167ffffffffffffffff81111561173757600080fd5b611743848285016115eb565b60e08301525061010082015167ffffffffffffffff81111561176457600080fd5b611770848285016115eb565b6101008301525092915050565b600061178982356121bf565b905092915050565b600061179d82516121bf565b905092915050565b6000602082840312156117b757600080fd5b60006117c5848285016114b6565b91505092915050565b6000602082840312156117e057600080fd5b60006117ee848285016114ca565b91505092915050565b6000806040838503121561180a57600080fd5b6000611818858286016114b6565b9250506020611829858286016114b6565b9150509250929050565b60008060008060008060008060c0898b03121561184f57600080fd5b600061185d8b828c016114b6565b985050602061186e8b828c016114b6565b975050604061187f8b828c01611563565b96505060606118908b828c016114b6565b955050608089013567ffffffffffffffff8111156118ad57600080fd5b6118b98b828c0161159f565b945094505060a089013567ffffffffffffffff8111156118d857600080fd5b6118e48b828c0161159f565b92509250509295985092959890939650565b6000806040838503121561190957600080fd5b60006119178582860161158b565b9250506020611928858286016114b6565b9150509250929050565b60006020828403121561194457600080fd5b600082015167ffffffffffffffff81111561195e57600080fd5b61196a84828501611641565b91505092915050565b60006020828403121561198557600080fd5b60006119938482850161177d565b91505092915050565b6000602082840312156119ae57600080fd5b60006119bc84828501611791565b91505092915050565b600080604083850312156119d857600080fd5b60006119e68582860161177d565b92505060206119f7858286016114b6565b9150509250929050565b60008060408385031215611a1457600080fd5b6000611a228582860161177d565b9250506020611a3385828601611563565b9150509250929050565b60008060408385031215611a5057600080fd5b6000611a5e8582860161177d565b9250506020611a6f8582860161177d565b9150509250929050565b600080600080600060808688031215611a9157600080fd5b6000611a9f8882890161177d565b9550506020611ab08882890161177d565b945050604086013567ffffffffffffffff811115611acd57600080fd5b611ad98882890161159f565b93509350506060611aec88828901611563565b9150509295509295909350565b611b0281612144565b82525050565b6000611b1382612121565b808452602084019350611b2583612114565b60005b82811015611b5757611b3b868351611af9565b611b4482612137565b9150602086019550600181019050611b28565b50849250505092915050565b611b6c81612164565b82525050565b611b7b816121c9565b82525050565b611b8a816121db565b82525050565b6000828452602084019350611ba68385846121ed565b611baf8361222f565b840190509392505050565b6000611bc58261212c565b808452611bd98160208601602086016121fc565b611be28161222f565b602085010191505092915050565b6000601882527f307830206173206f776e6572206e6f7420616c6c6f77656400000000000000006020830152604082019050919050565b6000602482527f7573657220646f6573206e6f742068617665207468652072657175697265642060208301527f726f6c65000000000000000000000000000000000000000000000000000000006040830152606082019050919050565b6000601782527f6d73672e73656e646572206973206e6f74206f776e65720000000000000000006020830152604082019050919050565b6000602082527f73617665536d6172744d65746572526561643a2077726f6e672073656e6465726020830152604082019050919050565b6000602482527f73617665536d6172744d65746572526561643a206173736574206e6f7420616360208301527f74697665000000000000000000000000000000000000000000000000000000006040830152606082019050919050565b611d5881612170565b82525050565b6000602082019050611d736000830184611af9565b92915050565b600060c082019050611d8e600083018b611af9565b611d9b602083018a611af9565b611da86040830189611b63565b611db56060830188611af9565b8181036080830152611dc8818688611b90565b905081810360a0830152611ddd818486611b90565b90509998505050505050505050565b600061012082019050611e02600083018c611af9565b611e0f602083018b611af9565b611e1c604083018a611d4f565b611e296060830189611d4f565b611e366080830188611b63565b81810360a0830152611e488187611bba565b905081810360c0830152611e5c8186611bba565b905081810360e0830152611e708185611bba565b9050818103610100830152611e858184611b08565b90509a9950505050505050505050565b6000602082019050611eaa6000830184611b63565b92915050565b6000602082019050611ec56000830184611b72565b92915050565b6000602082019050611ee06000830184611b81565b92915050565b60006020820190508181036000830152611eff81611bf0565b9050919050565b60006020820190508181036000830152611f1f81611c27565b9050919050565b60006020820190508181036000830152611f3f81611c84565b9050919050565b60006020820190508181036000830152611f5f81611cbb565b9050919050565b60006020820190508181036000830152611f7f81611cf2565b9050919050565b6000602082019050611f9b6000830184611d4f565b92915050565b6000604082019050611fb66000830185611d4f565b611fc36020830184611af9565b9392505050565b6000604082019050611fdf6000830185611d4f565b611fec6020830184611b63565b9392505050565b60006040820190506120086000830186611d4f565b818103602083015261201b818486611b90565b9050949350505050565b600060408201905061203a6000830185611d4f565b6120476020830184611d4f565b9392505050565b60006080820190506120636000830187611d4f565b6120706020830186611d4f565b61207d6040830185611d4f565b61208a6060830184611b63565b95945050505050565b6000604051905081810181811067ffffffffffffffff821117156120b657600080fd5b8060405250919050565b600067ffffffffffffffff8211156120d757600080fd5b602082029050602081019050919050565b600067ffffffffffffffff8211156120ff57600080fd5b601f19601f8301169050602081019050919050565b6000602082019050919050565b600081519050919050565b600081519050919050565b6000602082019050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b60008115159050919050565b6000819050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b60008115159050919050565b60006006821015156121b757600080fd5b819050919050565b6000819050919050565b60006121d482612144565b9050919050565b60006121e682612144565b9050919050565b82818337600083830152505050565b60005b8381101561221a5780820151818401526020810190506121ff565b83811115612229576000848401525b50505050565b6000601f19601f83011690509190505600a265627a7a72305820b8188b02e5ff93f2f28626ffb0f56751262ef54ec7204039c854351f756ef30d6c6578706572696d656e74616cf50037","contractName":"AssetConsumingRegistryLogic","deployedBytecode":"6080604052600436106100d0576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff16806307052442146100d55780631c1b8772146100fe57806344724c8c146101275780634d655aff146101525780638da5cb5b1461017d578063a4d068ba146101a8578063a6f9dae1146101d1578063a861c6ef146101fa578063ae51439c14610223578063bb5a389e1461024e578063e28cb1921461028b578063e60a955d146102b4578063eac8f5b8146102dd578063f09a401614610322575b600080fd5b3480156100e157600080fd5b506100fc60048036036100f791908101906119c5565b61034b565b005b34801561010a57600080fd5b50610125600480360361012091908101906117a5565b610490565b005b34801561013357600080fd5b5061013c6105cd565b6040516101499190611ecb565b60405180910390f35b34801561015e57600080fd5b506101676105f3565b6040516101749190611eb0565b60405180910390f35b34801561018957600080fd5b50610192610619565b60405161019f9190611d5e565b60405180910390f35b3480156101b457600080fd5b506101cf60048036036101ca9190810190611a79565b61063e565b005b3480156101dd57600080fd5b506101f860048036036101f391908101906117a5565b6109be565b005b34801561020657600080fd5b50610221600480360361021c9190810190611a3d565b610b3b565b005b34801561022f57600080fd5b50610238610bea565b6040516102459190611f86565b60405180910390f35b34801561025a57600080fd5b50610275600480360361027091908101906118f6565b610caf565b6040516102829190611e95565b60405180910390f35b34801561029757600080fd5b506102b260048036036102ad9190810190611833565b610e3c565b005b3480156102c057600080fd5b506102db60048036036102d69190810190611a01565b61103f565b005b3480156102e957600080fd5b5061030460048036036102ff9190810190611973565b6111ea565b60405161031999989796959493929190611dec565b60405180910390f35b34801561032e57600080fd5b50610349600480360361034491908101906117f7565b61131e565b005b6000600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff161415151561039357600080fd5b600161039f8133610caf565b15156103e0576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016103d790611f06565b60405180910390fd5b600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16630ff85b9484846040518363ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401610459929190611fa1565b600060405180830381600087803b15801561047357600080fd5b505af1158015610487573d6000803e3d6000fd5b50505050505050565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16141515610521576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161051890611f26565b60405180910390fd5b600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663a6f9dae1826040518263ffffffff167c01000000000000000000000000000000000000000000000000000000000281526004016105989190611d5e565b600060405180830381600087803b1580156105b257600080fd5b505af11580156105c6573d6000803e3d6000fd5b5050505050565b600360009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b61064661143b565b6000600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff161415151561068e57600080fd5b600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663eac8f5b8876040518263ffffffff167c01000000000000000000000000000000000000000000000000000000000281526004016107059190611f86565b600060405180830381600087803b15801561071f57600080fd5b505af1158015610733573d6000803e3d6000fd5b505050506040513d6000823e3d601f19601f8201168201806040525061075c9190810190611932565b90503373ffffffffffffffffffffffffffffffffffffffff16816020015173ffffffffffffffffffffffffffffffffffffffff161415156107d2576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016107c990611f46565b60405180910390fd5b80608001511515610818576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161080f90611f66565b60405180910390fd5b857f7517279c41ec47d7f502ff774d831a4b597622367e34b0fb4779d90cbdff26bd826060015187846000015186604051610856949392919061204e565b60405180910390a2600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16637c7959dc8786866040518463ffffffff167c01000000000000000000000000000000000000000000000000000000000281526004016108d993929190611ff3565b600060405180830381600087803b1580156108f357600080fd5b505af1158015610907573d6000803e3d6000fd5b50505050600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166357c3bc6087876040518363ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401610984929190612025565b600060405180830381600087803b15801561099e57600080fd5b505af11580156109b2573d6000803e3d6000fd5b50505050505050505050565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16141515610a4f576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610a4690611f26565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff1614151515610ac1576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610ab890611ee6565b60405180910390fd5b806000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055507f95fd54179c11867fb083dd94347ea50f144dd4cfd7612b7bca169f162824af1681604051610b309190611d5e565b60405180910390a150565b600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663c279130683836040518363ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401610bb4929190612025565b600060405180830381600087803b158015610bce57600080fd5b505af1158015610be2573d6000803e3d6000fd5b505050505050565b6000600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663ae51439c6040518163ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401602060405180830381600087803b158015610c7257600080fd5b505af1158015610c86573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250610caa919081019061199c565b905090565b6000806000600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16635c7460d66040518163ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401602060405180830381600087803b158015610d3a57600080fd5b505af1158015610d4e573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250610d7291908101906117ce565b73ffffffffffffffffffffffffffffffffffffffff1663265209f2856040518263ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401610dc69190611d5e565b602060405180830381600087803b158015610de057600080fd5b505af1158015610df4573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250610e18919081019061199c565b9150846005811115610e2657fe5b60020a9050600081831614159250505092915050565b600080600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1614151515610e8557600080fd5b600388610e928282610caf565b1515610ed3576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610eca90611f06565b60405180910390fd5b6001610edf8133610caf565b1515610f20576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610f1790611f06565b60405180910390fd5b600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663e28cb1928d8d8d8d8d8d8d8d6040518963ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401610fa5989796959493929190611d79565b602060405180830381600087803b158015610fbf57600080fd5b505af1158015610fd3573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250610ff7919081019061199c565b9350837fd3ab0c36887772472a25b1c1cecc0dee794b7c5ca472edaa2db255346878ee6b336040516110299190611d5e565b60405180910390a2505050505050505050505050565b6000600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff161415151561108757600080fd5b60016110938133610caf565b15156110d4576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016110cb90611f06565b60405180910390fd5b600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663e60a955d84846040518363ffffffff167c010000000000000000000000000000000000000000000000000000000002815260040161114d929190611fca565b600060405180830381600087803b15801561116757600080fd5b505af115801561117b573d6000803e3d6000fd5b5050505081156111b757827fbb4a2f3fc0f65f1ee98dc140226f7718191ba94892efdc55613785ccbf00a8e860405160405180910390a26111e5565b827f61f3fbe0c2049de9b0219669983a937b4377c1dced582b6a720a87b49ae3c08b60405160405180910390a25b505050565b600080600080600060608060608061120061143b565b600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663eac8f5b88c6040518263ffffffff167c01000000000000000000000000000000000000000000000000000000000281526004016112779190611f86565b600060405180830381600087803b15801561129157600080fd5b505af11580156112a5573d6000803e3d6000fd5b505050506040513d6000823e3d601f19601f820116820180604052506112ce9190810190611932565b9050806020015199508060400151985080606001519750806080015195508060a001519450806000015196508060e00151935080610100015192508060c001519150509193959799909294969850565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161415156113af576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016113a690611f26565b60405180910390fd5b6000600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff161415156113f657600080fd5b81600260006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055505050565b6101206040519081016040528060008152602001600073ffffffffffffffffffffffffffffffffffffffff168152602001600073ffffffffffffffffffffffffffffffffffffffff16815260200160008152602001600015158152602001606081526020016060815260200160608152602001606081525090565b60006114c2823561217a565b905092915050565b60006114d6825161217a565b905092915050565b600082601f83011215156114f157600080fd5b81516115046114ff826120c0565b612093565b9150818183526020840193506020810190508385602084028201111561152957600080fd5b60005b83811015611559578161153f88826114ca565b84526020840193506020830192505060018101905061152c565b5050505092915050565b600061156f823561219a565b905092915050565b6000611583825161219a565b905092915050565b600061159782356121a6565b905092915050565b60008083601f84011215156115b357600080fd5b8235905067ffffffffffffffff8111156115cc57600080fd5b6020830191508360018202830111156115e457600080fd5b9250929050565b600082601f83011215156115fe57600080fd5b815161161161160c826120e8565b612093565b9150808252602083016020830185838301111561162d57600080fd5b6116388382846121fc565b50505092915050565b6000610120828403121561165457600080fd5b61165f610120612093565b9050600061166f84828501611791565b6000830152506020611683848285016114ca565b6020830152506040611697848285016114ca565b60408301525060606116ab84828501611791565b60608301525060806116bf84828501611577565b60808301525060a082015167ffffffffffffffff8111156116df57600080fd5b6116eb848285016115eb565b60a08301525060c082015167ffffffffffffffff81111561170b57600080fd5b611717848285016114de565b60c08301525060e082015167ffffffffffffffff81111561173757600080fd5b611743848285016115eb565b60e08301525061010082015167ffffffffffffffff81111561176457600080fd5b611770848285016115eb565b6101008301525092915050565b600061178982356121bf565b905092915050565b600061179d82516121bf565b905092915050565b6000602082840312156117b757600080fd5b60006117c5848285016114b6565b91505092915050565b6000602082840312156117e057600080fd5b60006117ee848285016114ca565b91505092915050565b6000806040838503121561180a57600080fd5b6000611818858286016114b6565b9250506020611829858286016114b6565b9150509250929050565b60008060008060008060008060c0898b03121561184f57600080fd5b600061185d8b828c016114b6565b985050602061186e8b828c016114b6565b975050604061187f8b828c01611563565b96505060606118908b828c016114b6565b955050608089013567ffffffffffffffff8111156118ad57600080fd5b6118b98b828c0161159f565b945094505060a089013567ffffffffffffffff8111156118d857600080fd5b6118e48b828c0161159f565b92509250509295985092959890939650565b6000806040838503121561190957600080fd5b60006119178582860161158b565b9250506020611928858286016114b6565b9150509250929050565b60006020828403121561194457600080fd5b600082015167ffffffffffffffff81111561195e57600080fd5b61196a84828501611641565b91505092915050565b60006020828403121561198557600080fd5b60006119938482850161177d565b91505092915050565b6000602082840312156119ae57600080fd5b60006119bc84828501611791565b91505092915050565b600080604083850312156119d857600080fd5b60006119e68582860161177d565b92505060206119f7858286016114b6565b9150509250929050565b60008060408385031215611a1457600080fd5b6000611a228582860161177d565b9250506020611a3385828601611563565b9150509250929050565b60008060408385031215611a5057600080fd5b6000611a5e8582860161177d565b9250506020611a6f8582860161177d565b9150509250929050565b600080600080600060808688031215611a9157600080fd5b6000611a9f8882890161177d565b9550506020611ab08882890161177d565b945050604086013567ffffffffffffffff811115611acd57600080fd5b611ad98882890161159f565b93509350506060611aec88828901611563565b9150509295509295909350565b611b0281612144565b82525050565b6000611b1382612121565b808452602084019350611b2583612114565b60005b82811015611b5757611b3b868351611af9565b611b4482612137565b9150602086019550600181019050611b28565b50849250505092915050565b611b6c81612164565b82525050565b611b7b816121c9565b82525050565b611b8a816121db565b82525050565b6000828452602084019350611ba68385846121ed565b611baf8361222f565b840190509392505050565b6000611bc58261212c565b808452611bd98160208601602086016121fc565b611be28161222f565b602085010191505092915050565b6000601882527f307830206173206f776e6572206e6f7420616c6c6f77656400000000000000006020830152604082019050919050565b6000602482527f7573657220646f6573206e6f742068617665207468652072657175697265642060208301527f726f6c65000000000000000000000000000000000000000000000000000000006040830152606082019050919050565b6000601782527f6d73672e73656e646572206973206e6f74206f776e65720000000000000000006020830152604082019050919050565b6000602082527f73617665536d6172744d65746572526561643a2077726f6e672073656e6465726020830152604082019050919050565b6000602482527f73617665536d6172744d65746572526561643a206173736574206e6f7420616360208301527f74697665000000000000000000000000000000000000000000000000000000006040830152606082019050919050565b611d5881612170565b82525050565b6000602082019050611d736000830184611af9565b92915050565b600060c082019050611d8e600083018b611af9565b611d9b602083018a611af9565b611da86040830189611b63565b611db56060830188611af9565b8181036080830152611dc8818688611b90565b905081810360a0830152611ddd818486611b90565b90509998505050505050505050565b600061012082019050611e02600083018c611af9565b611e0f602083018b611af9565b611e1c604083018a611d4f565b611e296060830189611d4f565b611e366080830188611b63565b81810360a0830152611e488187611bba565b905081810360c0830152611e5c8186611bba565b905081810360e0830152611e708185611bba565b9050818103610100830152611e858184611b08565b90509a9950505050505050505050565b6000602082019050611eaa6000830184611b63565b92915050565b6000602082019050611ec56000830184611b72565b92915050565b6000602082019050611ee06000830184611b81565b92915050565b60006020820190508181036000830152611eff81611bf0565b9050919050565b60006020820190508181036000830152611f1f81611c27565b9050919050565b60006020820190508181036000830152611f3f81611c84565b9050919050565b60006020820190508181036000830152611f5f81611cbb565b9050919050565b60006020820190508181036000830152611f7f81611cf2565b9050919050565b6000602082019050611f9b6000830184611d4f565b92915050565b6000604082019050611fb66000830185611d4f565b611fc36020830184611af9565b9392505050565b6000604082019050611fdf6000830185611d4f565b611fec6020830184611b63565b9392505050565b60006040820190506120086000830186611d4f565b818103602083015261201b818486611b90565b9050949350505050565b600060408201905061203a6000830185611d4f565b6120476020830184611d4f565b9392505050565b60006080820190506120636000830187611d4f565b6120706020830186611d4f565b61207d6040830185611d4f565b61208a6060830184611b63565b95945050505050565b6000604051905081810181811067ffffffffffffffff821117156120b657600080fd5b8060405250919050565b600067ffffffffffffffff8211156120d757600080fd5b602082029050602081019050919050565b600067ffffffffffffffff8211156120ff57600080fd5b601f19601f8301169050602081019050919050565b6000602082019050919050565b600081519050919050565b600081519050919050565b6000602082019050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b60008115159050919050565b6000819050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b60008115159050919050565b60006006821015156121b757600080fd5b819050919050565b6000819050919050565b60006121d482612144565b9050919050565b60006121e682612144565b9050919050565b82818337600083830152505050565b60005b8381101561221a5780820151818401526020810190506121ff565b83811115612229576000848401525b50505050565b6000601f19601f83011690509190505600a265627a7a72305820b8188b02e5ff93f2f28626ffb0f56751262ef54ec7204039c854351f756ef30d6c6578706572696d656e74616cf50037","source":"// Copyright 2018 Energy Web Foundation\n// This file is part of the Origin Application brought to you by the Energy Web Foundation,\n// a global non-profit organization focused on accelerating blockchain technology across the energy sector, \n// incorporated in Zug, Switzerland.\n//\n// The Origin Application is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n// This is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY and without an implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details, at <http://www.gnu.org/licenses/>.\n//\n// @authors: slock.it GmbH, Martin Kuechler, martin.kuechler@slock.it\n\npragma solidity ^0.4.24;\npragma experimental ABIEncoderV2;\n\nimport \"../../contracts/Asset/AssetConsumingRegistryDB.sol\";\nimport \"../../contracts/AssetContractLookup.sol\";\nimport \"../../contracts/Asset/AssetLogic.sol\";\nimport \"../../contracts/Interfaces/AssetConsumingInterface.sol\";\n\n/// @title The logic contract for the asset registration\n/// @notice This contract provides the logic that determines how the data is stored\n/// @dev Needs a valid AssetConsumingRegistryDB contract to function correctly \ncontract AssetConsumingRegistryLogic is AssetLogic, AssetConsumingInterface {\n\n    event LogNewMeterRead(uint indexed _assetId, uint _oldMeterRead, uint _newMeterRead, uint _certificatesUsedForWh, bool _smartMeterDown);\n\n    UserContractLookupInterface public userContractLookup;\n    \n    /// @notice Constructor\n    constructor(UserContractLookupInterface _userContractLookup, AssetContractLookupInterface _assetContractLookup) RoleManagement(_userContractLookup,_assetContractLookup) public {\n        userContractLookup = _userContractLookup;\n    }\n\n    /// @notice Sets the general information of an asset in the database\n    /// @param _smartMeter The address of the smart meter\n    /// @param _owner The address of the asset owner\n    /// @param _active true if active\n    /// @param _matcher matcher-address\n    /// @param _propertiesDocumentHash propertiesDocumentHash\n    /// @param _url url\n    function createAsset (\n        address _smartMeter,\n        address _owner,\n        bool _active,\n        address _matcher,\n        string _propertiesDocumentHash,\n        string _url\n    ) \n        external\n        isInitialized\n        userHasRole(RoleManagement.Role.AssetManager, _owner)\n        onlyRole(RoleManagement.Role.AssetAdmin)\n    {  \n        uint _assetId = AssetConsumingRegistryDB(db).createAsset(_smartMeter,_owner,_active,_matcher, _propertiesDocumentHash, _url);\n        emit LogAssetCreated(msg.sender, _assetId);\n    }\n    \n    /// @notice Logs meter read\n    /// @param _assetId The id belonging to an entry in the asset registry\n    /// @param _newMeterRead The current meter read of the asset\n    /// @param _lastSmartMeterReadFileHash Last meter read file hash\n    /// @param _smartMeterDown Flag if the smartmeter had an error during reading\n    function saveSmartMeterRead(uint _assetId, uint _newMeterRead, string _lastSmartMeterReadFileHash, bool _smartMeterDown) \n        external\n        isInitialized\n    {\n        AssetConsumingRegistryDB.Asset memory asset = AssetConsumingRegistryDB((db)).getAsset(_assetId);\n        require(asset.smartMeter == msg.sender,\"saveSmartMeterRead: wrong sender\");\n        require(asset.active,\"saveSmartMeterRead: asset not active\");\n        emit LogNewMeterRead(_assetId,  asset.lastSmartMeterReadWh, _newMeterRead, asset.certificatesUsedForWh, _smartMeterDown);\n        db.setLastSmartMeterReadFileHash(_assetId, _lastSmartMeterReadFileHash);\n        AssetConsumingRegistryDB((db)).setLastSmartMeterReadWh(_assetId, _newMeterRead);\n    }\n\n    /// @notice sets the consumption for a period (in Wh)\n    /// @param _assetId assetId\n    /// @param _consumed the amount of energy consumed\n    function setConsumptionForPeriode(uint _assetId, uint _consumed)\n        external\n     //   onlyAccount(address(cooContract.marketRegistry()))\n    {\n        AssetConsumingRegistryDB(db).setCertificatesUsedForWh(_assetId, _consumed);\n    }\n\n    /// @notice Gets an asset\n    /// @param _assetId The id belonging to an entry in the asset registry\n    /// @return Full informations of an asset\n    function getAsset(uint _assetId) \n        external\n        view\n        returns (\n            address _smartMeter,\n            address _owner,\n            uint _lastSmartMeterReadWh,\n            uint _certificatesUsedForWh,\n            bool _active,\n            string _lastSmartMeterReadFileHash,\n            string _propertiesDocumentHash,\n            string _url,\n            address[] _matcher\n            )\n    {        \n        AssetConsumingRegistryDB.Asset memory asset = AssetConsumingRegistryDB((db)).getAsset(_assetId);\n        _smartMeter = asset.smartMeter;\n        _owner = asset.owner;\n        _lastSmartMeterReadWh = asset.lastSmartMeterReadWh;\n        _active = asset.active;\n        _lastSmartMeterReadFileHash = asset.lastSmartMeterReadFileHash;\n        _certificatesUsedForWh = asset.certificatesUsedForWh;\n        _propertiesDocumentHash = asset.propertiesDocumentHash;\n        _url = asset.url;\n        _matcher = asset.matcher;\n    }\n\n    \n}","networks":"{}"}